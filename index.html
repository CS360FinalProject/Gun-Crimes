<!DOCTYPE html>
<html>
<head>
  <title> Gun Deaths </title>
  <meta charset="utf-8"/>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity = "sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin = "anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

  <style type="text/css">
  button {
    cursor: pointer;
  }
  th {
    background: red;
    color: white;
    font-weight: bold;
    cursor: s-resize;
  }
  td,th {
    padding: 10px;
    border: 1px solid #ccc;
    text-align: left;
  }

  #detail{
    margin: 0;
  }
  #detail{
    font-size:13px;
    font-family: "Comic Sans MS", cursive, sans-serif;
  }
  .bar:hover{
    fill: OrangeRed;
  }
  </style>
</head>
<body style="background-color:white;">
  <center>
    <h1> GUN DEATHS </h1>

  </center>

  <center>
  <h2>Gun problems across the world! What the fuss is all about ?</h2>
</center>
  <p> In today's world a lot has been going on in mainstream media
    regarding the use of the guns. Some people are in favor of Guns
    and some are not so much. To be able to see if both sides of the
    arguments are correct, we decided to look at the data and make
    our opinions on the basis of data itself. Avoiding political
    correctnes at all costs, the main purpose of this website/project
    is tell a story related with gun deaths using visualizations and data </p>
    <center>
    <h3> Data </h3>
  </center>
    <p> Before we dwell into visualizations and start making assumptions we
      will talk little bit about the data. The data for this particular project was
      gathered from various resources, primarily from : FBI, the guardian, Mother Jones and
      Kaggle. Data is divided into three categories. First one is the world data, second
      is about shooting in US from 2004-2016 and third is about Mass shootings the US from
      past 50 years <p>

        <center>
    <h3> Story </h3>
  </center>
    <p> Story for this project is divided into three different sub-categories just
      like the data. Our main focus is mainly on the US, so our story will go something
      along these lines: </p>
      <p> 1 : Looking at the world data and comparing each country with each other,
        then comparing top countries on the basis of gun ownership and in the end
        comparing top countries on the basis of GDP and gun ownership to see where
        exactly the US stands.
      <p> 2 : The second part of our project is about looking at the general shooting
        statitics in the US and see how the US has done over past few years (2004-2016).
        We looked at the data from each state and compared shooting statitics of each and
        every state individually as well.
        <p> 3 : Third part of our project is about mass shootings that have took place in
          the US over past 46 years or so (1982-2018). Comparing data on the basis of place
          where mass shooting took place, guns used during those shootings and number of people
          got killed during that shooting </p>

          <center>
          <h4> Visualizations </h4>
        </center>

        <p> Up next are all the visualizations and anlysis related with this data and
          opinions related to the trends over the years. Visualizations also allows user
          interaction making it easier for anyone to hover over and communicate with the data</p>

          <center>
            <h5> Comparing countries with High GDP </h5>
          </center>
          <script type="text/javascript">
          var margin = {
    top: 30,
    right: 30,
    bottom: 60,
    left: 70,
  },
   width = 1000 - margin.left - margin.right;
   height = 500 - margin.top - margin.bottom;
  var x = d3.scaleLinear()
  .range([0,width]);
  var y = d3.scaleLinear()
  .range([height,0]);
  var div = d3.select("body").append("div")
  .attr("class","tooltip")
  .style("opacity", 0);
  var color = d3.scaleOrdinal(d3.schemeCategory10);
  var svg = d3.select("body").append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", width + margin.top + margin.bottom)
  .append("g")
  .attr("transform","translate (" + margin.left + "," + margin.top + ")");
  d3.csv("gdpcomparison.csv", function (error, data) {
    if(error) throw error;
    data.forEach(function (d) {
      d.homicides = +d.homicides;
      d.ownership = +d.ownership;
    });
    x.domain(d3.extent(data, function (d) {
      return d.ownership;
    })).nice();
    y.domain(d3.extent(data, function (d) {
      return d.homicides;
    })).nice();
    svg.selectAll(".dot")
    .data(data)
    .enter().append("circle")
    .attr("class","dot")
    .attr("r", function(d) {
      return Math.sqrt(parseInt(d.gdp)*0.00000000008);
    })
    .attr("cx", function (d) {
      return x(d.ownership);
    })
    .attr("cy", function (d) {
      return y(d.homicides);
    })
    .on("mouseover", function (d) {
      div.transition()
      .duration(200)
      .style("opacity",.9);
      div.html("Gun Homicides : " + d.homicides + "<br/> Country : " + d.country + "<br/> Guns Owned:"+ d.ownership + "<br/> GDP :" + d.GDP)
      .style("left", (d3.event.pageX) + "px")
      .style("top", (d3.event.pageY - 10) + "px");
    })
    .on("mouseout", function (d) {
      div.transition()
      .duration(500)
      .style("opacity", 0);
    })
    .style("fill", function (d) {
      return color(d.country);
    });
    svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
        svg.append("text")
        .attr("transform","translate(" + (width/2) + " ," +(height + margin.top + 20) + ")")
        .style("text-anchor", "middle")
        .text("Gun ownership");
    svg.append("g")
        .call(d3.axisLeft(y));
        svg.append("text")
              .attr("transform", "rotate(-90)")
              .attr("y", 0 - margin.left)
              .attr("x",0 - (height / 2))
              .attr("dy", "1em")
              .style("text-anchor", "middle")
              .text("Gun homicides");
    var legend = svg.selectAll(".legend")
      .data(color.domain())
    .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) {
        return "translate(0," + ((i * 25)+60) + ")"
      });
  legend.append("rect")
      .attr("x", width - 18)
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", color);
  legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9)
      .attr("dy", ".35em")
      .style("text-anchor", "end")
      .text(function(d) {
        return d;
      });
  });

  var margin = {
    top: 40,
    right: 30,
    bottom: 50,
    left: 70,
  },

  width = 1000 - margin.left - margin.right;
  height = 500 - margin.top - margin.bottom;

 var x = d3.scaleLinear()
 .range([0,width]);

 var y = d3.scaleLinear()
 .range([height,0]);

 var div = d3.select("body").append("div")
 .attr("class","tooltip")
 .style("opacity", 0);

 var color = d3.scaleOrdinal(d3.schemeCategory10);

 var svg = d3.select("body").append("svg")
 .attr("width", width + margin.left + margin.right)
 .attr("height", width + margin.top + margin.bottom)
 .append("g")
 .attr("transform","translate (" + margin.left + "," + margin.top + ")");

 d3.csv("homicide.csv", function (error, data) {
   if(error) throw error;

   data.forEach(function (d) {
     d.homicide = +d.homicide;
     d.ownership = +d.ownership;
   });

   x.domain(d3.extent(data, function (d) {
     return d.ownership;
   })).nice();

   y.domain(d3.extent(data, function (d) {
     return d.homicide;
   })).nice();

   svg.selectAll(".dot")
   .data(data)
   .enter().append("circle")
   .attr("class","dot")
   .attr("r", function(d) {
     return Math.sqrt(parseInt(d.homicide)*0.05);
   })
   .attr("cx", function (d) {
     return x(d.ownership);
   })
   .attr("cy", function (d) {
     return y(d.homicide);
   })
   .on("mouseover", function (d) {
     div.transition()
     .duration(200)
     .style("opacity",.9);
     div.html("Gun Homicides : " + d.homicide + "<br/> Country : " + d.country + "<br/> Guns Owned:"+ d.ownership)
     .style("left", (d3.event.pageX) + "px")
     .style("top", (d3.event.pageY - 10) + "px");
   })
   .on("mouseout", function (d) {
     div.transition()
     .duration(500)
     .style("opacity", 0);
   })
   .style("fill", function (d) {
     return color(d.country);
   });

   svg.append("g")
       .attr("transform", "translate(0," + height + ")")
       .call(d3.axisBottom(x));
       svg.append("text")
       .attr("transform","translate(" + (width/2) + " ," +(height + margin.top + 20) + ")")
       .style("text-anchor", "middle")
       .text("Gun ownership");
   svg.append("g")
       .call(d3.axisLeft(y));
       svg.append("text")
             .attr("transform", "rotate(-90)")
             .attr("y", 0 - margin.left)
             .attr("x",0 - (height / 2))
             .attr("dy", "1em")
             .style("text-anchor", "middle")
             .text("Gun homicides");

   var legend = svg.selectAll(".legend")
     .data(color.domain())
   .enter().append("g")
     .attr("class", "legend")
     .attr("transform", function(d, i) {
       return "translate(0," + ((i * 25)+75) + ")"
     });

 legend.append("rect")
     .attr("x", width - 18)
     .attr("width", 18)
     .attr("height", 18)
     .style("fill", color);

 legend.append("text")
     .attr("x", width - 24)
     .attr("y", 9)
     .attr("dy", ".35em")
     .style("text-anchor", "end")
     .text(function(d) {
       return d;
     });

 });
          </script>

    </head>
  </html>
